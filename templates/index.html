<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Farid | Flask App üöÄ</title>

<style>
@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap');
*{margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif;}

body{
    background: linear-gradient(160deg,#080A19,#111627);
    color:#fff;display:flex;justify-content:center;align-items:center;
    min-height:100vh;padding:20px;
}
.container{
    max-width:1050px;width:100%;padding:30px;display:flex;gap:30px;
    background:rgba(255,255,255,0.05);backdrop-filter:blur(10px);
    border-radius:20px;box-shadow:0 8px 24px rgba(0,0,0,0.6);
}
.profile-photo img{
    width:150px;height:150px;border-radius:50%;
    border:3px solid #5599FF;box-shadow:0 4px 15px rgba(85,153,255,0.5);
}

.header h1{color:#5599FF;font-size:2rem;margin-bottom:5px;}

.messages{
    background:rgba(85,153,255,0.08);padding:10px;border-radius:12px;
    max-height:230px;overflow-y:auto;margin:15px 0;
}
.message-item{
    background:rgba(255,255,255,0.07);margin:5px 0;padding:8px;
    border-radius:8px;display:flex;justify-content:space-between;
    align-items:center;gap:8px;
}
.msg-time{font-size:0.75rem;color:#aaa;}

.delete-btn{
    background:#d9534f;border:none;border-radius:6px;color:#fff;
    padding:3px 7px;cursor:pointer;font-size:12px;
}
.delete-btn:hover{background:#b52a27;}

input[type="text"], input[type="submit"]{
    width:100%;padding:12px;border-radius:10px;
    margin-top:6px;outline:none;font-size:16px;
}
input[type="text"]{
    border:1px solid rgba(85,153,255,0.4);
    background:rgba(255,255,255,0.06);color:#fff;
}
input[type="text"]:focus{
    border-color:#5599FF;box-shadow:0 0 10px #5599FF;
}
input[type="submit"]{
    background:#5599FF;border:none;color:#fff;cursor:pointer;
}
input[type="submit"]:hover{background:#417ad6;}

.social{margin-top:15px;display:flex;gap:15px;}
.social a{color:#5599FF;font-size:24px;text-decoration:none;}
.social a:hover{text-shadow:0 0 15px #5599FF;}

@media(max-width:800px){
    .container{flex-direction:column;align-items:center;text-align:center;}
}
</style>
</head>

<body>
<div class="container">
    <div class="profile-photo">
        <img src="/templates/profile.jpg" alt="Farid">
    </div>

    <div class="content">
        <div class="header">
            <h1>Shaik Farid | DevOps Enthusiast</h1>
            <p>Student | Aspiring Cloud & DevOps Engineer</p>
        </div>

        <div class="social">
            <a href="https://github.com/skfarid45" target="_blank">üê± GitHub</a>
            <a href="https://linkedin.com" target="_blank">üíº LinkedIn</a>
        </div>

        <div class="messages" id="messagesBox"></div>

        <form id="messageForm">
            <input type="text" name="new_message" placeholder="Type your message..." required>
            <input type="submit" value="Send">
        </form>
    </div>
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
// Auto Refresh Messages
function loadMessages() {
    $.get("/messages", function(data) {
        $("#messagesBox").empty();
        data.forEach(msg => {
            $("#messagesBox").append(`
                <div class="message-item">
                    <div>
                        <p>${msg[1]}</p>
                        <span class="msg-time">${msg[2]}</span>
                    </div>
                    <button class="delete-btn" onclick="deleteMsg(${msg[0]})">X</button>
                </div>
            `);
        });
    });
}

setInterval(loadMessages, 2000);
loadMessages();

// Submit message
$("#messageForm").on("submit", function(e){
    e.preventDefault();
    $.post("/submit", $(this).serialize(), function(){
        $("input[name='new_message']").val("");
        loadMessages();
    });
});

// Delete message
function deleteMsg(id){
    $.ajax({ url:`/delete/${id}`, type:"DELETE", success:loadMessages });
}
</script>

</body>
</html>